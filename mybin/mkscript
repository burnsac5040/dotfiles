#!/bin/sh

# generate a script in script directory
# set bin_dir (doesn't have to exist yet)

BIN_DIR="${HOME}/mybin"

# dialog
ANS=$(\
  dialog --title "Create a Script" \
        --clear \
        --cancel-label "Exit" \
        --inputbox 'Enter FILE name: ' 8 40 \
  3>&1 1>&2 2>&3 3>&- \
)

# zenity pop up
# ANS=$(\
#   zenity --title="Create a Script" \
#   --cancel-label "Exit" \
#   --entry \
#   --text "Enter file name: "
# )

FILE=$BIN_DIR/$ANS

if [ -d "$BIN_DIR" ]; then
  if [ -e "$BIN_DIR/$ANS" ]; then
    $EDITOR "$FILE"
  else
    printf "#!/bin/sh\n\n\n" >> "$FILE"
    chmod +x "$FILE"
    if [ "$EDITOR" = "nvim" ]; then
      $EDITOR +3 "$FILE"
    else
      $EDITOR "$FILE"
    fi
  fi
fi

ln -siv "${BIN_DIR}/${ANS}" /usr/local/mybin
